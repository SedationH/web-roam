## ç±»å‹

æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬è¿™æ ·æ¥å®šä¹‰ç±»å‹ï¼šå¯¹è¯­è¨€å¼•æ“å’Œå¼€å‘äººå‘˜æ¥è¯´ã€ç±»å‹æ˜¯å€¼çš„å†…éƒ¨ç‰¹å¾ï¼Œå®ƒå®šä¹‰äº†å€¼çš„è¡Œä¸ºï¼Œä»¥åŒºåˆ«äºå…¶ä»–å€¼ã€‚



### å†…ç½®ç±»å‹

1. Null
2. Undefined
3. Boolean
4. Number
5. String
6. Symbol
7. Bigint
8. Object
9. Function(ä¹Ÿè®¸åº”è¯¥æ”¾åˆ° 8 é‡Œ)



å‰ä¸ƒä¸ªéƒ½æ˜¯ primitve value



1 8 è¿˜æœ‰ä¸€äº›ä¸æ˜¯Function çš„ Structual Type ä½¿ç”¨ typeofæ¥æä»–ä»¬éƒ½æ˜¯ object

e.g,

`typeof (new Map()) === 'object'`



## å€¼

#### æ•°ç»„

å¦‚ `Array(3)` -> [empty Ã— 3]

å‡ºç°ç±»ä¼¼emptyçš„æ•°ç»„ï¼Œlog empty ä¸º undefined ï¼Œä½†ä¸æ˜¾ç¤ºèµ‹å€¼æœ‰åŒºåˆ«

æ•°ç»„åªæ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œä¼˜åŒ–äº†keyå¯ä»¥è½¬åŒ–ä¸ºæ•°å­—çš„æƒ…å†µ

æ³¨æ„ï¼Œå¯¹è±¡ä¸­çš„keyåªèƒ½ä¸ºå­—ç¬¦ä¸²ï¼Œå› æ­¤ arr[1] å’Œ  arr["1"] æ˜¯ä¸€æ ·çš„



ç±»æ•°ç»„ï¼Œæœ‰å¯¹è±¡æœ‰

 length: xx

è¿™ä¸ªå°±ok 

> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from
>
> array-like objects (objects with a `length` property and indexed elements); 

ä¸¾ä¾‹ä¸€äº›ç±»æ•°ç»„

document.querySelectAll -> NodeList

string

ä»–ä»¬å¯ä»¥å€Ÿç”¨Arryçš„æ–¹æ³•ï¼ˆåˆ©ç”¨call

(ç±»ä¼¼reverseè¿™æ ·ä¿®æ”¹è‡ªèº«çš„æ˜¯ä¸èƒ½çš„)

å¸¸è§ç”¨äºç±»æ•°ç»„ -> æ•°ç»„ çš„æ–¹æ³•

Array.prototype.slice

Array.from



> æä¸€å¥ï¼Œè¿™é‡Œä¸å±•å¼€
>
> typed arraysã€æ¶‰åŠArrayBuffer å’Œ views
>
> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays



#### å­—ç¬¦ä¸²

æ³¨æ„ä¸cç±»ä¼¼è¯­è¨€ä¸­çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒºåˆ†

stringç±»å‹çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œæ¯ä¸€ä¸ªindexå¯¹åº”çš„charæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼ˆcharåªæ˜¯ä¸ºäº† è¯´æ˜ï¼Œåœ¨JavaScriptä¸­å¹¶æ— æ„ä¹‰

å­—ç¬¦ä¸²åè½¬

`str.split('').reverse().join('')`

æ³¨æ„è¿™ç§æ–¹æ³•å¯¹Unicodeçš„å­—ç¬¦ä¸²åè½¬æ— æ•ˆï¼Œå…¶ä¸€ä¸ªç¬¦å·å¹¶ä¸å¯¹åº”ä¸€ä¸ªchar

```js
const str = 'ğŸ˜€ğŸ˜€ğŸ˜ƒğŸ˜…'

console.log(
  str.split('').reverse().join(''),
  str.length
)
// ï¿½ğŸ˜ƒğŸ˜€ğŸ˜€ï¿½ 8
```



#### æ•°å­—

JavaScript ä¸­çš„æ•°æ®ç±»å‹æ˜¯åŒç²¾åº¦ åŸºäº IEEE 754 æ ‡å‡†

![image-20200525230400613](http://picbed.sedationh.cn/image-20200525230400613.png)

(æ³¨æ„52ä½å°¾æ•° é€»è¾‘ä¸Šè¿˜æœ‰ç¬¬53ä½ ä¸º1)

primitive value numer å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼Œå¼•æ“ä¼šå¯¹å…¶ç”¨Numberè¿›è¡ŒåŒ…è£…

4.toFixed(2)  ä¼šæŠ¥é”™ å› ä¸ºç¬¬ä¸€ä¸ª . è¢«ç†è§£æˆäº†å°æ•°ç‚¹è€Œä¸æ˜¯æˆå‘˜è®¿é—®ç¬¦

å³

```js
var a = 4.
atoFixed(2)
```

è§£å†³æ–¹æ¡ˆ

```js
4..toFixed(2)
(4).toFixed(2)
```

æ›´å¤šçš„è¿›åˆ¶è¡¨ç¤º

0x

0b

0o



è¿˜æœ‰è‘—åçš„ç²¾åº¦é—®é¢˜

0.1 + 0.2 === 0.3 ? false

IEEE 754æ ‡å‡†æ— æ³•ç²¾ç¡®çš„è¡¨ç¤º

![image-20210728103622103](http://picbed.sedationh.cn/image-20210728103622103.png)

è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ç²¾åº¦



æŠŠé‚£ä¸ªæŠ½è±¡çš„1 å‘å‰ç§»åŠ¨52ä¸ªï¼Œè¿˜åœ¨å¯ç²¾ç¡®è¡¨ç¤ºèŒƒå›´å†…ï¼ŒæŠŠè¿™ä¸ªä½œä¸ºç²¾åº¦(å¦‚ä½•ç†è§£è¿™ä¸ªç²¾åº¦å‘¢ï¼Ÿä¸‹é¢å®‰å…¨ä¹Ÿæ˜¯ï¼Ÿ)

```js
const { log } = console

log(Number.EPSILON === Math.pow(2, -52))


function equal(a, b) {
  return Math.abs(a - b) < Number.EPSILON
}

log(equal(0.1 + 0.2, 0.3))
```



å®‰å…¨æ•°

```js
Math.pow(2, 53) - 1 === Number.MAX_SAFE_INTEGER)

-Math.pow(2, 53) + 1 === Number.MIN_SAFE_INTEGER)
```



æ˜¯æ•´æ•°å—ï¼Ÿ

1.1 % 1 å¯ä»¥æ‹¿åˆ°å°æ•°



ä½è¿ç®—åªæ”¯æŒ32ä½å®‰å…¨èŒƒå›´å†…çš„æ•´æ•°



#### ç‰¹æ®Šå€¼

undefined æ˜¯æ²¡å®šä¹‰

null æ˜¯å®šä¹‰äº†æ²¡æœ‰



void å¯ä»¥è¿”å› undefined



undefinedä¸æ˜¯å…³é”®å­—

å³å¯ä»¥ `var  undefined = xxx` è¦å°å¿ƒ



NaNå’Œè‡ªå·±ä¸ç›¸ç­‰



Infinity è¶…å‡ºè¿ç®—èŒƒå›´ jså°±è¿‘å–æ•´



æœ‰ + - 0 è½¬æ¢ä¸ºstringä¼šä¸¢å¤± + - ä¿¡æ¯

> æŸäº›åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®æ˜¯å‘é‡ï¼Œ+ - å¯ä»¥è¡¨ç¤ºæ–¹å‘

-0 === 0



> The only difference between `Object.is()` and `===` is in their treatment of signed zeroes and NaNs.

ä¸‹é¢å†™ä¸€ä¸ªObject.isçš„polyfill

```js
const { log } = console

Object.is =
  Object.is ||
  function (a, b) {
    // + - 0
    if (a === b && a === 0) {
      return 1 / a === 1 / b
    }
    // NaN
    if (a !== b) {
      return a !== a
    }
    return a === b
  }

```

#### å€¼å’Œå¼•ç”¨

å€¼å¤åˆ¶è¿˜æ˜¯å¼•ç”¨å¤åˆ¶ ç”±ç±»å‹å†³å®š



## åŸç”Ÿå‡½æ•°

å¯ä»¥ä½¿ç”¨å­—é¢é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŸç”Ÿå‡½æ•°

æ³¨æ„é€šè¿‡åŸå£°å‡½æ•°newçš„è¯ä¼šæ˜¯å¯¹è±¡

æˆ‘ä»¬å¯¹primitive valueçš„å±æ€§æ“ä½œä¼šè¢«å¼•æ“è‡ªåŠ¨å°è£…

```js
const a = new Boolean(false)

console.log(!a) // false
```



çœ‹ä¸€ä¸‹è¿·æƒ‘è¡Œä¸º

```js
console.log(Array.isArray(Array.prototype)) // true æ˜¯ä¸ªç©ºæ•°ç»„

Array.prototype[0] = 1

const a = Array.prototype

const i = []
console.log(i[0])

console.log(Function.prototype()) // ç©ºå‡½æ•°
```



è¿˜æœ‰å°±æ˜¯æ³¨æ„Arrayçš„ç¨€ç–æ•°ç»„æƒ…å†µ mapæ ¹æœ¬ä¸éå†ç©ºçš„åœ°æ–¹



## éšå¼ç±»å‹è½¬æ¢

### éšå¼å°±æ˜¯æ²¡ç”¨æ„é€ å‡½æ•°æçš„



```js
String(1) // æ˜¾ç¤º
a + "" // éšå¼
```



### æŠ½è±¡è§„åˆ™

#### ToString



JOSN.stringfyæ¶‰åŠToStringå¼ºåˆ¶ç±»å‹è½¬æ¢

JSON ä¸­å…è®¸çš„æ•°æ®ç±»å‹ : 

Object Array 
String Boolean Number null

âš ï¸æ³¨æ„

Number ä¸­çš„ Infinity && NaN -> null

Map ç±»ä¼¼çš„å¯¹è±¡ä¸­çš„å¯è¿­ä»£å¯¹è±¡

```js
let a = {
  arr: [1, 2, 3],
  toJSON: function () {
    return this.arr.slice(1)
  },
}

console.log(JSON.stringify(a))

a = {
  arr: [1, 2, 3],
  toJSON: function () {
    return `[${this.arr.slice(1).join()}]`
  },
}

console.log(JSON.stringify(a) === "'[2,3]'") // false
console.log(JSON.stringify(a) === '"[2,3]"') // true
```

toJSON åº”è¯¥è¿”å›ä¸€ä¸ªèƒ½å¤Ÿè¢«å­—ç¬¦ä¸²åŒ–çš„JSONå€¼ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªJSONå­—ç¬¦ä¸²

```js
a = {
  arr: [1, 2, 3],
  toJSON: function () {
    return '1'
  },
}

console.log(JSON.stringify(a) === '"1"') // true
```



#### ToNumber

å¯¹è±¡é¦–å…ˆå˜åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå†ToNumber



```js
console.log(['1'] == 1) // true
console.log([] == 0) // true
```



ToBoolean



è¿™èŠ‚ç•¥å§ï¼Œä¸å¤ªæƒ³çœ‹

[æ¢³ç†ä¸‹è¿™ç¯‡æ–‡ç« çš„ç±»å‹è½¬æ¢å³å¯](http://www.conardli.top/blog/article/JS%E8%BF%9B%E9%98%B6/%E4%BD%A0%E7%9C%9F%E7%9A%84%E6%8E%8C%E6%8F%A1%E5%8F%98%E9%87%8F%E5%92%8C%E7%B1%BB%E5%9E%8B%E4%BA%86%E5%90%97%EF%BC%88%E4%BA%8C%EF%BC%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html#_7-2-if%E8%AF%AD%E5%8F%A5%E5%92%8C%E9%80%BB%E8%BE%91%E8%AF%AD%E5%8F%A5)

æ³¨æ„ToNumberçš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„



## è¯­æ³•

### è¡¨è¾¾å¼ã€è¯­å¥çš„ç‰¹ç‚¹

![image-20210805215611481](http://picbed.sedationh.cn/image-20210805215611481.png)



### æœ‰æ ‡ç­¾å¯ç”¨

```js
out: for (let i = 0; i < 3; i++) {
  for (let j = 0; j < 3; j++) {
    if (i + j === 1) {
      break out
    }
    console.log(i + j)
  }
}
```



### else if 

```js
const a = 4

if (a === 1) {
} else if (a === 2) {
} else if (a === 3) {
} else {
  console.log('hi')
}

if (a === 1) {
} else {
  if (a === 2) {
  } else {
    if (a === 3) {
    } else {
      console.log('hi')
    }
  }
}

```



### è¿ç®—ç¬¦ä¼˜å…ˆçº§å’Œç»“å’Œæ€§

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence



é¦–å…ˆè¿™é‡Œæœ‰ä¸ª[è¡¨](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#table)

å±•ç¤ºäº†JSä¸­æ‰€æœ‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§



ä¼˜å…ˆçº§æ˜¯é¦–å…ˆè€ƒè™‘çš„

a OP1 b OP2 c

è‹¥ OP2 === OP2 çš„æ—¶å€™

æ‰è€ƒè™‘ç»“åˆæ€§

ä¸¤ç§ç»“åˆæ€§(Associtivity)

- left-to-right (å¤§å¤šæ•°æ•°å­¦è¿ç®—éƒ½æ˜¯è¿™ä¸ªï¼Œé™¤äº† ** )
- right-to-left (èµ‹å€¼ï¼Œ ä¸‰å…ƒ..)





å› ä¸º () çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥åœ¨ç¡®å®šä¼˜å…ˆçº§åå¯ä»¥ç”¨()æèµ·æ¥ï¼Œå˜å¾—æ›´åŠ æ¸…æ™°

è¿˜æœ‰å€¼å¾—æ³¨æ„çš„ä¼˜å…ˆçº§

&& > || >  ?? > ä¸‰å…ƒ > èµ‹å€¼



å­¦åˆ°ä¸ªæ–°çš„è¿ç®—ç¬¦Optional chaining (?.)

```
obj.val?.prop
obj.val?.[expr]
obj.arr?.[index]
obj.func?.(args)
```

```js
const a = undefined;

console.log(a?.a) // undefined
```

### è‡ªåŠ¨åˆ†å·æ’å…¥ Automatic Semicolon Insertion ä¸¤ç±»é”™è¯¯

æ˜¯ä¸€ç§è¯­æ³•çº é”™æœºåˆ¶



ä¸¤ç§ç±»å‹çš„é”™è¯¯

- ç¼–è¯‘æ—¶é”™è¯¯
- è¿è¡Œæ—¶é”™è¯¯



### finally

æŠŠfinallyè§†ä½œè·³å‡ºä»£ç å—çš„çš„æ—¶å€™å¿…å®šæ‰§è¡Œçš„æ“ä½œ



æ— è®ºè¿™ä¸ªè·³å‡ºæ˜¯ throw return contine break è¿˜æ˜¯æ­£å¸¸èµ°å‡ºå»



éƒ½ä¼šè§¦å‘finallyçš„æ‰§è¡Œ



## å®¿ä¸»ç¯å¢ƒ

ä¸åŒscriptä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†çš„æ



ä¸€ä¸ªå˜é‡ç©ºé—´