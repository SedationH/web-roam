**面试向**



参考

- [计算机网络常见面试题](https://www.cnblogs.com/wuwuyong/p/12198928.html)

- [前端需要了解的计算机网络知识](https://juejin.cn/post/6844904079974465544#heading-8)

## 设计思想 & 理解方式

逐层分解网络功能实现

比较庞杂，有重点的看，封装开看待实现



## 层

从下至上

1. 物理层 规定传输媒体接口的标准
2. 数据链路层 处理两台主机间的逻辑数据传输
3. 网络层 合理处理路由转发
4. 运输层 处理端到端的通信 进程和进程
5. 应用层 不同的进程在交互的时候规定通信方式



按分布范围，计算机网络里有`局域网LAN`和`广域网WAN`, 其中局域网的代表以太网，以及这两种网络最重要的区分点，`局域网`基于`广播技术`，`广域网`基于`分组交换`技术。



## TCP 三次握手和四次挥手

设计的源头  网络传输中间的环境不确定性很多 通过**确认机制**来确定是可以通信的 不白白发送数据

通信所要解决的首要问题就是，**保持通信双方的信息对称，使通信双方处于同步状态。**



https://blog.csdn.net/qzcsu/article/details/72861891

![image-20201201205332998](http://picbed.sedationh.cn/image-20201201205332998.png)

SYN：同步序列编号（**Synchronize Sequence Numbers**）

发送 SYN 标记为1表示请求建立连接，并搭配seq序号(随机产生)进行发送

ACK (Acknowledge character）即是确认字符

ACK是用于回应SYN建立连接的请求的，ack = 所回应SYN的seq+1



![image-20201201210226857](http://picbed.sedationh.cn/image-20201201210226857.png)

FIN为1表示请求关闭连接，与SYN类似

四次挥手较三次握手需要考虑服务器还有数据没发完的可能



[关于2MSL](https://www.zhihu.com/question/67013338)

客户端并不确定服务器端是否收到自己的ACK，可能有两种情况

1. 服务器收到了，那啥消息都没了
2. 服务器没收到，会超时重写发送FIN

去向ACK消息最大存活时间（MSL) + 来向FIN消息的最大存活时间(MSL)

这恰恰就是**2MSL( Maximum Segment Life)。**

等待2MSL时间，A就可以放心地释放TCP占用的资源、端口号，**此时可以使用该端口号连接任何服务器。**

> **如果不等，释放的端口可能会重连刚断开的服务器端口，这样依然存活在网络里的老的TCP报文可能与新TCP连接报文冲突，造成数据冲突，为避免此种情况，需要耐心等待网络老的TCP连接的活跃报文全部死翘翘，2MSL时间可以满足这个需求（尽管非常保守）！**



## 浏览器输入url到页面显示的过程

// TODO



## HTTP 相关

### 长连接、短连接

HTTP/1.0 默认短连接

HTTP/1.1起，默认使用长连接

一般都加上

```
Connection:keep-alive
```

实现依赖于TCP

> - 客户端和服务器建立TCP连接后，会一直使用这条连接进行数据交互，直到没有数据传输或异常断开。在空闲期间，通常会使用``心跳数据包（Keep-Alive）`保持链路不断开。目前长连接方式应用范围比较广泛。

